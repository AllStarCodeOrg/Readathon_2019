<%include ../partials/head%>
<%include ../partials/nav%>

<link rel="stylesheet" href="/static/css/admin.css">
<script src="http://cdn.datatables.net/1.10.19/js/jquery.dataTables.min.js" defer></script>
<script src="/static/js/admin.js" defer></script>
<div class="container-fluid flex-center vh-100 p-0">
<div class="container-fluid d-flex vh-75 p-0">
    <%include ../partials/admin_sidebar%>    
    
    <!-- MAIN CONTENT AREA -->
    <div class="main-content-container container flex-grow">
        <%if(locals.msg){%>
          <div class="container d-flex flex-center text-center">
          <%if(msg.success){%>
            <h1 class="alert alert-success"><%= msg.success %></h1>  
          <%}else if(msg.error){%>
            <h1 class="alert alert-danger"><%= msg.error %></h1>
          <%}else if(msg.special){%>
            <div class="d-flex flex-center flex-column">
              <img width="200px" src="https://media.giphy.com/media/XsUtdIeJ0MWMo/source.gif">  
              <h1 class="mt-3 text-red"><%= msg.special %></h1>
            </div>
          <%}%>
          </div>
        <%}else{%>
            <h1>All Users</h1>
            
            <table id="userTable" class="table table-striped table-bordered" cellspacing="0" width="100%">
                    <thead>
                      <tr>
                        <th class="th-sm">ID
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Name
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Email
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Admin?
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Alumni?
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Access Month
                          <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                        <th class="th-sm">Edit
                                <i class="fa fa-sort float-right" aria-hidden="true"></i>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                        <%for(const user of users){%>
                          <tr>
                          <td><%=user.id%></td>
                          <td><%=user.name%></td>
                          <td><%=user.email%></td>
                          <td><%=user.admin===1 ? "Yes" : "No" %></td>
                          <td><%=user.alumni===1? "Yes" : "No" %></td>
                          <td><%=user.monthName%></td>
                          <td><a href="/admin/user/<%=user.id%>">Edit</a></td>
                      </tr>
                      <%}%>
                    </tbody>
                    
                  </table>

        <%}%>
    </div>
    <!-- MAIN CONTENT AREA END -->
</div>
</div>

<%include ../partials/footer%>

